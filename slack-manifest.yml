# ──────────────────────────────────────────────────────────────────────────────
# Slack App Manifest for opencode-channels
#
# Use this to create your Slack app in one step:
#   1. Go to https://api.slack.com/apps → "Create New App" → "From a manifest"
#   2. Select your workspace
#   3. Paste this YAML (or switch to YAML tab first)
#   4. Click "Create"
#   5. Click "Install to Workspace" → "Allow"
#
# After creating, copy these from the app dashboard:
#   - Bot Token (xoxb-...)  → OAuth & Permissions page
#   - Signing Secret        → Basic Information page
#
# The webhook URL is a placeholder — the setup wizard updates it automatically,
# or set it manually in Event Subscriptions after you have your public URL.
# ──────────────────────────────────────────────────────────────────────────────

display_information:
  name: OpenCode
  description: AI coding assistant powered by OpenCode
  background_color: "#1a1a2e"

features:
  bot_user:
    display_name: opencode
    always_online: true

  slash_commands:
    - command: /oc
      url: https://placeholder.example.com/api/webhooks/slack
      description: OpenCode commands
      usage_hint: "[help|models|agents|status|reset|<question>]"
      should_escape: false

    - command: /opencode
      url: https://placeholder.example.com/api/webhooks/slack
      description: OpenCode commands
      usage_hint: "[help|models|agents|status|reset|<question>]"
      should_escape: false

oauth_config:
  scopes:
    bot:
      - app_mentions:read
      - channels:history
      - channels:read
      - chat:write
      - chat:write.public
      - commands
      - files:read
      - files:write
      - groups:history
      - groups:read
      - im:history
      - im:read
      - im:write
      - mpim:history
      - mpim:read
      - reactions:read
      - reactions:write
      - users:read
      - assistant:write

settings:
  event_subscriptions:
    # Replace with your public URL (or let the setup wizard do it)
    request_url: https://placeholder.example.com/api/webhooks/slack
    bot_events:
      - app_mention
      - message.channels
      - message.groups
      - message.im
      - message.mpim
      - reaction_added

  interactivity:
    is_enabled: true
    # Same URL — Chat SDK routes everything through one endpoint
    request_url: https://placeholder.example.com/api/webhooks/slack

  org_deploy_enabled: false
  socket_mode_enabled: false
  token_rotation_enabled: false
